<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git学习笔记 | UFO基地</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hello, my friend!">
    
    <link rel="preload" href="/assets/css/0.styles.d4bf95f4.css" as="style"><link rel="preload" href="/assets/js/app.ed392c7e.js" as="script"><link rel="preload" href="/assets/js/2.e61ebc2f.js" as="script"><link rel="preload" href="/assets/js/41.da785b17.js" as="script"><link rel="prefetch" href="/assets/js/10.0c2a5e6f.js"><link rel="prefetch" href="/assets/js/11.65763309.js"><link rel="prefetch" href="/assets/js/12.62bd7cd5.js"><link rel="prefetch" href="/assets/js/13.84fd7b00.js"><link rel="prefetch" href="/assets/js/14.76172ee6.js"><link rel="prefetch" href="/assets/js/15.3ad856d8.js"><link rel="prefetch" href="/assets/js/16.3ac7f06b.js"><link rel="prefetch" href="/assets/js/17.65a246fc.js"><link rel="prefetch" href="/assets/js/18.cb772baf.js"><link rel="prefetch" href="/assets/js/19.f76cfbf3.js"><link rel="prefetch" href="/assets/js/20.dc8d8d82.js"><link rel="prefetch" href="/assets/js/21.687a969a.js"><link rel="prefetch" href="/assets/js/22.137fa288.js"><link rel="prefetch" href="/assets/js/23.14cbc642.js"><link rel="prefetch" href="/assets/js/24.0aeeb403.js"><link rel="prefetch" href="/assets/js/25.7fa9db84.js"><link rel="prefetch" href="/assets/js/26.44e82cd1.js"><link rel="prefetch" href="/assets/js/27.fa31f48f.js"><link rel="prefetch" href="/assets/js/28.8e011d93.js"><link rel="prefetch" href="/assets/js/29.ce077aa3.js"><link rel="prefetch" href="/assets/js/3.604382ba.js"><link rel="prefetch" href="/assets/js/30.79ecda02.js"><link rel="prefetch" href="/assets/js/31.ee3c01fc.js"><link rel="prefetch" href="/assets/js/32.c985f1e2.js"><link rel="prefetch" href="/assets/js/33.44200f11.js"><link rel="prefetch" href="/assets/js/34.c649ac18.js"><link rel="prefetch" href="/assets/js/35.2a6ddc50.js"><link rel="prefetch" href="/assets/js/36.bef21df1.js"><link rel="prefetch" href="/assets/js/37.01e1887e.js"><link rel="prefetch" href="/assets/js/38.6d4a1211.js"><link rel="prefetch" href="/assets/js/39.dde25747.js"><link rel="prefetch" href="/assets/js/4.b3d7061b.js"><link rel="prefetch" href="/assets/js/40.32c4bbff.js"><link rel="prefetch" href="/assets/js/42.c3c277b4.js"><link rel="prefetch" href="/assets/js/5.abedb45c.js"><link rel="prefetch" href="/assets/js/6.73c063ed.js"><link rel="prefetch" href="/assets/js/7.b4e343ac.js"><link rel="prefetch" href="/assets/js/8.b05dfa12.js"><link rel="prefetch" href="/assets/js/9.823e2c0f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4bf95f4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">UFO基地</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontBase/html/htmlBase.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/css/cssBase.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/javascript/string.html" class="nav-link">
  javascript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/vue/vueBase.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/react/reactBase.html" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/nodejs/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          web基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/webTech/browser/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/ajax/ajax.html" class="nav-link">
  ajax
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/http/http.html" class="nav-link">
  http
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/optimize/optimize.html" class="nav-link">
  性能优化
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用" class="dropdown-title"><span class="title">通用</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用" class="mobile-dropdown-title"><span class="title">通用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/normal/github/gitNotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  git文档
</a></li><li class="dropdown-item"><!----> <a href="/normal/algorithm/dataStructure.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/normal/nginx/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/normal/database/mysqlBase.html" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/normal/editTool/idea/idea.html" class="nav-link">
  idea
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vscode/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vim/vim.html" class="nav-link">
  vim
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/frontFramework/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontBase/html/htmlBase.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/css/cssBase.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/javascript/string.html" class="nav-link">
  javascript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/vue/vueBase.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/react/reactBase.html" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/nodejs/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          web基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/webTech/browser/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/ajax/ajax.html" class="nav-link">
  ajax
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/http/http.html" class="nav-link">
  http
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/optimize/optimize.html" class="nav-link">
  性能优化
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用" class="dropdown-title"><span class="title">通用</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用" class="mobile-dropdown-title"><span class="title">通用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/normal/github/gitNotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  git文档
</a></li><li class="dropdown-item"><!----> <a href="/normal/algorithm/dataStructure.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/normal/nginx/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/normal/database/mysqlBase.html" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/normal/editTool/idea/idea.html" class="nav-link">
  idea
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vscode/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vim/vim.html" class="nav-link">
  vim
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/frontFramework/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/normal/github/gitNotes.html" aria-current="page" class="active sidebar-link">git文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_1-环境安装" class="sidebar-link">1 环境安装</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_2-git原理" class="sidebar-link">2 git原理</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_3-git基本操作" class="sidebar-link">3 git基本操作</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_4-git常用命令" class="sidebar-link">4 git常用命令</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_5-文件忽略" class="sidebar-link">5 文件忽略</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_6-分支操作" class="sidebar-link">6 分支操作</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_7-远程分支" class="sidebar-link">7 远程分支</a></li><li class="sidebar-sub-header"><a href="/normal/github/gitNotes.html#_8-git开发流程" class="sidebar-link">8 git开发流程</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git学习笔记"><a href="#git学习笔记" class="header-anchor">#</a> git学习笔记</h1> <h2 id="_1-环境安装"><a href="#_1-环境安装" class="header-anchor">#</a> 1 环境安装</h2> <h3 id="_1-1-软件下载安装"><a href="#_1-1-软件下载安装" class="header-anchor">#</a> 1.1 软件下载安装</h3> <p>Git 各平台安装包下载地址为：http://git-scm.com/downloads</p> <p>git 管理工具sourcetree下载</p> <p>https://www.sourcetreeapp.com/</p> <p><strong>sourcetree使用教程</strong></p> <p>官方教程：https://confluence.atlassian.com/get-started-with-sourcetree/connect-your-bitbucket-or-github-account-847359096.html</p> <p>详细教程：掘金https://juejin.im/post/5b21d750e51d450688136ad3</p> <h3 id="_1-2-配置"><a href="#_1-2-配置" class="header-anchor">#</a> 1.2 配置</h3> <h4 id="_1-2-1-用户信息配置"><a href="#_1-2-1-用户信息配置" class="header-anchor">#</a> 1.2.1 用户信息配置</h4> <p><strong>git自带vim编辑器，在文件中可以用vim命令</strong></p> <p>设置用户名和邮箱</p> <div class="language-git extra-class"><pre class="language-git"><code>//全局配置
git config --global username <span class="token string">&quot;用户名&quot;</span>
git config --global user.email <span class="token string">&quot;邮箱&quot;</span>
//单个项目配置
git config --local username <span class="token string">&quot;用户名&quot;</span>
git config --local user.email <span class="token string">&quot;邮箱&quot;</span>
</code></pre></div><p>查看配置信息：</p> <div class="language- extra-class"><pre class="language-text"><code>git config --list
</code></pre></div><h4 id="_1-2-2-mac配置git-权限"><a href="#_1-2-2-mac配置git-权限" class="header-anchor">#</a> 1.2.2 Mac配置git 权限</h4> <p>给git 初始化仓库添加文件时，报错warning: xxxxxx:Permission defined</p> <p>解决步骤：</p> <ul><li><p>cd ~ 进入根目录</p></li> <li><p>ls -al 查看是否有.config文件</p></li> <li><p>如果有，查看.config的文件权限是否为root，是则需要配置权限。</p> <div class="language- extra-class"><pre class="language-text"><code>运行命令sudo chown 用户名  .config
</code></pre></div></li> <li><p>如果没有需要配置环境变量</p></li> <li><div class="language- extra-class"><pre class="language-text"><code>cd ~
vim ~/.bash_profile
i       //进入vim编辑状态
export PATH=&quot;/usr/local/bin:$PATH&quot; //这个路径是git的安装路径，执行 which git可以查看git安装路径
然后给按照上面的步骤配置权限
</code></pre></div></li></ul> <h3 id="_1-3-终端机常用命令"><a href="#_1-3-终端机常用命令" class="header-anchor">#</a> 1.3 终端机常用命令</h3> <table><thead><tr><th>windows</th> <th>macos/linux</th> <th>说明</th></tr></thead> <tbody><tr><td>cd</td> <td>cd</td> <td>切换目录</td></tr> <tr><td>cd</td> <td>pwd</td> <td>获取当前所在位置</td></tr> <tr><td>dir</td> <td>ls</td> <td>列出当前的文件列表</td></tr> <tr><td>mkdir</td> <td>mkdir</td> <td>创建新的目录</td></tr> <tr><td>无</td> <td>touch</td> <td>创建文件</td></tr> <tr><td>copy</td> <td>cp</td> <td>复制文件</td></tr> <tr><td>move</td> <td>mv</td> <td>移动文件</td></tr> <tr><td>del</td> <td>rm</td> <td>删除文件</td></tr> <tr><td>cls</td> <td>clear</td> <td>清除画面上的内容</td></tr></tbody></table> <blockquote><p>查询配置信息</p></blockquote> <ol><li>列出当前配置：<code>git config --list</code>;</li> <li>列出repository配置：<code>git config --local --list</code>;</li> <li>列出全局配置：<code>git config --global --list</code>;</li> <li>列出系统配置：<code>git config --system --list</code>;</li></ol> <blockquote><p>第一次使用git，配置用户信息</p></blockquote> <ol><li>配置用户名：<code>git config --global user.name &quot;your name&quot;</code>;</li> <li>配置用户邮箱：<code>git config --global user.email &quot;youremail@github.com&quot;</code>;</li></ol> <blockquote><p>其他配置</p></blockquote> <ol><li>配置解决冲突时使用哪种差异分析工具，比如要使用vimdiff：<code>git config --global merge.tool vimdiff</code>;</li> <li>配置git命令输出为彩色的：<code>git config --global color.ui auto</code>;</li> <li>配置git使用的文本编辑器：<code>git config --global core.editor vi</code>;</li></ol> <h3 id="_1-4-配置ssh"><a href="#_1-4-配置ssh" class="header-anchor">#</a> 1.4 配置ssh</h3> <p>报错：</p> <div class="language- extra-class"><pre class="language-text"><code>Pushing to git@github.com:1563610087/todolist-react.git

Warning: Permanently added the RSA host key for IP address '192.30.253.113' to the list of known hosts.

git@github.com: Permission denied (publickey).

fatal: Could not read from remote repository.

需要设置ssh key
</code></pre></div><p>流程：</p> <p>在 github 或者gitlab上添加 SSH key 的步骤：</p> <h4 id="_1-4-1-检查是否存在ssh"><a href="#_1-4-1-检查是否存在ssh" class="header-anchor">#</a> 1.4.1 检查是否存在ssh</h4> <ul><li><strong>运行 git Bash 客户端，输入如下代码：</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ cd ~/.ssh
$ ls
</code></pre></div><p>是检查是否已经存在 id_rsa.pub 或 id_dsa.pub 文件，如果文件已经存在，跳过步骤2，直接进入步骤3。</p> <h4 id="_1-4-2-创建ssh"><a href="#_1-4-2-创建ssh" class="header-anchor">#</a> 1.4.2 创建ssh</h4> <ul><li><strong>创建一个 SSH key</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;
</code></pre></div><p>代码参数含义：
-t 指定密钥类型，默认是 rsa ，可以省略。
-C 设置注释文字，比如邮箱。
-f 指定密钥文件存储文件名。</p> <p>以上代码省略了 -f 参数，因此，运行上面那条命令后会让你输入一个文件名，用于保存刚才生成的 SSH key 代码，如：</p> <div class="language- extra-class"><pre class="language-text"><code>Generating public/private rsa key pair.
# Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): [Press enter]
</code></pre></div><p>当然，你也可以不输入文件名，使用默认文件名（推荐），那么就会生成 id_rsa 和 id_rsa.pub 两个秘钥文件。</p> <p>接着又会提示你输入两次密码（该密码是你push文件的时候要输入的密码，而不是github管理者的密码），
当然，你也可以不输入密码，直接按回车。那么push的时候就不需要输入密码，直接提交到github上了，如：</p> <p>Enter passphrase (empty for no passphrase):</p> <p>Enter same passphrase again:</p> <p>接下来，就会显示如下代码提示，如：</p> <div class="language- extra-class"><pre class="language-text"><code>Your identification has been saved in /c/Users/you/.ssh/id_rsa.
# Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.
# The key fingerprint is:
# 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com
</code></pre></div><h4 id="_1-4-3-添加ssh公钥"><a href="#_1-4-3-添加ssh公钥" class="header-anchor">#</a> 1.4.3 添加ssh公钥</h4> <p>添加你的 SSH key 到 github上面去**</p> <ul><li><p>首先你需要拷贝 id_rsa.pub 文件的内容，vim 打开</p></li> <li><p>登录你的github账号，从右上角的设置（ Account Settings ）进入，然后点击菜单栏的 SSH key 进入页面添加 SSH key。</p></li> <li><p>点击 Add SSH key 按钮添加一个 SSH key 。把你复制的 SSH key 代码粘贴到 key 所对应的输入框中，记得 SSH key 代码的前后不要留有空格或者回车。当然，上面的 Title 所对应的输入框你也可以输入一个该 SSH key 显示在 github 上的一个别名。默认的会使用你的邮件名称。</p></li> <li><p>测试一下该SSH key
首先要给github bash输入一下代码</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ ssh -T git@github.com
</code></pre></div><p>当你输入以上代码时，会有一段警告代码，如：</p> <div class="language- extra-class"><pre class="language-text"><code>The authenticity of host 'github.com (207.97.227.239)' can't be established.

RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.

Are you sure you want to continue connecting (yes/no)?
</code></pre></div><h2 id="_2-git原理"><a href="#_2-git原理" class="header-anchor">#</a> 2 git原理</h2> <h3 id="_2-1-git工作流程"><a href="#_2-1-git工作流程" class="header-anchor">#</a> 2.1 git工作流程</h3> <p>一般工作流程如下：</p> <ul><li>克隆 Git 资源作为工作目录。</li> <li>在克隆的资源上添加或修改文件。</li> <li>如果其他人修改了，你可以更新资源。</li> <li>在提交前查看修改。</li> <li>提交修改。</li> <li>在修改完成后，如果发现错误，可以撤回提交并再次修改并提交。</li></ul> <p>下图展示了 Git 的工作流程：</p> <p><img src="https://www.runoob.com/wp-content/uploads/2015/02/git-process.png" alt="img"></p> <h3 id="_2-2-基本原理"><a href="#_2-2-基本原理" class="header-anchor">#</a> 2.2 基本原理</h3> <p>git的通用操作流程如下图（来源于网络）</p> <p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcc0987bf1c0a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="git操作通用流程"></p> <p>主要涉及到四个关键点：</p> <ol><li>工作区：本地电脑存放项目文件的地方，比如learnGitProject文件夹；</li> <li>暂存区（Index/Stage）：在使用git管理项目文件的时候，其本地的项目文件会多出一个.git的文件夹，将这个.git文件夹称之为版本库。其中.git文件夹中包含了两个部分，一个是暂存区（Index或者Stage）,顾名思义就是暂时存放文件的地方，通常使用add命令将工作区的文件添加到暂存区里；</li> <li>本地仓库：.git文件夹里还包括git自动创建的master分支，并且将HEAD指针指向master分支。使用commit命令可以将暂存区中的文件添加到本地仓库中；</li> <li>远程仓库：不是在本地仓库中，项目代码在远程git服务器上，比如项目放在github上，就是一个远程仓库，通常使用clone命令将远程仓库拷贝到本地仓库中，开发后推送到远程仓库中即可；</li></ol> <h3 id="_2-3-工作区、暂存区、版本库"><a href="#_2-3-工作区、暂存区、版本库" class="header-anchor">#</a> 2.3 工作区、暂存区、版本库</h3> <p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcc0e7e711dc7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="git几个核心区域间的关系"></p> <ul><li>图中左侧为工作区，右侧为版本库。在版本库中标记为 &quot;index&quot; 的区域是暂存区（stage/index），标记为 &quot;master&quot; 的是 master 分支所代表的目录树。</li> <li>图中我们可以看出此时 &quot;HEAD&quot; 实际是指向 master 分支的一个&quot;游标&quot;。所以图示的命令中出现 HEAD 的地方可以用 master 来替换。</li> <li>图中的 objects 标识的区域为 Git 的对象库，实际位于 &quot;.git/objects&quot; 目录下，里面包含了创建的各种对象及内容。</li> <li>当对工作区修改（或新增）的文件执行 <strong>git add</strong> 命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中。</li> <li>当执行提交操作（git commit）时，暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树。</li> <li>当执行 <strong>git reset HEAD</strong> 命令时，暂存区的目录树会被重写，被 master 分支指向的目录树所替换，但是工作区不受影响。</li> <li>当执行 **git rm --cached ** 命令时，会直接从暂存区删除文件，工作区则不做出改变。</li> <li>当执行 <strong>git checkout .</strong> 或者 **git checkout -- ** 命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动。</li> <li>当执行 <strong>git checkout HEAD .</strong> 或者 **git checkout HEAD ** 命令时，会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。</li></ul> <p>日常开发时代码实际上放置在工作区中，也就是本地的XXX.java这些文件，通过add等这些命令将代码文教提交给暂存区（Index/Stage），也就意味着代码全权交给了git进行管理，之后通过commit等命令将暂存区提交给master分支上，也就是意味打了一个版本，也可以说代码提交到了本地仓库中。另外，团队协作过程中自然而然还涉及到与远程仓库的交互。</p> <p>因此，经过这样的分析，git命令可以分为这样的逻辑进行理解和记忆：</p> <ol><li><p>git管理配置的命令；</p> <p><strong>几个核心存储区的交互命令：</strong></p></li> <li><p>工作区与暂存区的交互；</p></li> <li><p>暂存区与本地仓库（分支）上的交互；</p></li> <li><p>本地仓库与远程仓库的交互。</p></li></ol> <h2 id="_3-git基本操作"><a href="#_3-git基本操作" class="header-anchor">#</a> 3 git基本操作</h2> <h3 id="_3-1-创建目录"><a href="#_3-1-创建目录" class="header-anchor">#</a> 3.1 创建目录</h3> <p>创建一个版本库非常简单，首先，选择一个合适的地方，创建一个空目录：</p> <div class="language- extra-class"><pre class="language-text"><code>$ mkdir learngit
$ cd learngit
$ pwd
/Users/michael/learngit
</code></pre></div><p><code>pwd</code>命令用于显示当前目录。在我的Mac上，这个仓库位于<code>/Users/michael/learngit</code></p> <h3 id="_3-2-git初始化"><a href="#_3-2-git初始化" class="header-anchor">#</a> 3.2 git初始化</h3> <div class="language-git extra-class"><pre class="language-git"><code><span class="token command">$ git init</span>
</code></pre></div><p>通过<code>git init</code>命令把这个目录变成Git可以管理的仓库</p> <h3 id="_3-3-添加文件到git仓库"><a href="#_3-3-添加文件到git仓库" class="header-anchor">#</a> 3.3 添加文件到git仓库</h3> <h4 id="_3-3-1-操作流程"><a href="#_3-3-1-操作流程" class="header-anchor">#</a> 3.3.1 操作流程</h4> <ol><li><p>第一步，用命令<code>git add</code>告诉Git，改动的文件添加到暂缓区：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//添加单个文件
<span class="token function">git</span> <span class="token function">add</span> readme.txt
//添加整个文件夹
<span class="token function">git</span> <span class="token function">add</span> 文件夹/
//添加所有改动的文件
<span class="token function">git</span> <span class="token function">add</span> --all
</code></pre></div></li> <li><p>第二步，用命令<code>git commit</code>告诉Git，将暂缓区的文件提交到本地仓库：</p> <div class="language- extra-class"><pre class="language-text"><code>$ git commit -m &quot;wrote a readme file&quot;
[master (root-commit) eaadf4e] wrote a readme file
 1 file changed, 2 insertions(+)
 create mode 100644 readme.txt
</code></pre></div><p><code>git commit</code>命令，<code>-m</code>后面输入的是本次提交的说明，可以输入任意内容，一般是说明此次文件的改动，这样你就能从历史记录里方便地找到改动记录</p></li> <li><p>查看历史提交信息：如下
<code>git log</code></p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>PS F:\前端\gitTest&gt; git log
commit 9d6b558e4f7a405999bdc17af17a1ceb5e1dd46b (HEAD -&gt; master)
Author: jiange &lt;1563610087@qq.com&gt;
Date:   Sun Nov 1 11:26:50 2020 +0800
</code></pre></div><p>commit后面的9d6b558e4f7a405999bdc17af17a1ceb5e1dd46b是采用sha-1算法生成的，每次提交都会生成这样的字符串标识唯一的提交记录</p> <p>​	<code>git log --oneline</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>//这个命令可以将提交记录简化成1行
PS F:<span class="token punctuation">\</span>前端<span class="token punctuation">\</span>gitTest<span class="token operator">&gt;</span> <span class="token function">git</span> log --oneline
013b449 <span class="token punctuation">(</span>HEAD -<span class="token operator">&gt;</span> master<span class="token punctuation">)</span> 增加样式
6d320c2 第一次改动
9d6b558 项目初始化2
44703f6 项目初始化
</code></pre></div><h4 id="_3-3-2-git-commit常见操作"><a href="#_3-3-2-git-commit常见操作" class="header-anchor">#</a> 3.3.2 <strong>git commit常见操作</strong></h4> <p><strong>1 修改上一次commit中的提交的说明内容</strong></p> <div class="language- extra-class"><pre class="language-text"><code>git commit --amend -m &quot;要修改的内容&quot;
</code></pre></div><div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">//执行命令前，最新的提交信息为：增加样式</span>
<span class="token constant">PS</span> <span class="token constant">F</span><span class="token operator">:</span>\前端\gitTest<span class="token operator">&gt;</span> git log <span class="token operator">--</span>oneline
<span class="token number">013</span><span class="token function">b449</span> <span class="token punctuation">(</span><span class="token constant">HEAD</span> <span class="token operator">-</span><span class="token operator">&gt;</span> master<span class="token punctuation">)</span> 增加样式
<span class="token number">6</span>d320c2 第一次改动
<span class="token number">9</span>d6b558 项目初始化<span class="token number">2</span>
<span class="token number">44703</span>f6 项目初始化

<span class="token comment">//执行命令后，最新的提交信息：修改主页样式，同时也改变了上一次提交的sha-1字符串，由013b449变为ad7705b</span>
<span class="token constant">PS</span> <span class="token constant">F</span><span class="token operator">:</span>\前端\gitTest<span class="token operator">&gt;</span> git commit <span class="token operator">--</span>amend <span class="token operator">-</span>m <span class="token string">&quot;修改主页样式&quot;</span>
<span class="token punctuation">[</span>master ad7705b<span class="token punctuation">]</span> 修改主页样式
 Date<span class="token operator">:</span> Sun Nov <span class="token number">1</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span><span class="token operator">:</span><span class="token number">01</span> <span class="token number">2020</span> <span class="token operator">+</span><span class="token number">0800</span>
 <span class="token number">1</span> file changed<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token function">insertions</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span>
 create mode <span class="token number">100644</span> index<span class="token punctuation">.</span>css
</code></pre></div><p><strong>2 删除上一次的commit</strong></p> <p><strong>3 追加一个文件到最近的commit</strong></p> <p>刚进行了commit，发现还有一个文件忘记提交，想把这个文件加到最近的一个commit，而不是在重新commit一次</p> <p>操作：</p> <p>文件如果还是untracked状态，先将文件add进缓存区</p> <p>然后执行命令</p> <div class="language- extra-class"><pre class="language-text"><code>git commit --amend --no-edit
</code></pre></div><h3 id="_3-4-git查询历史记录"><a href="#_3-4-git查询历史记录" class="header-anchor">#</a> 3.4 git查询历史记录</h3> <p>查询某个人的提交记录</p> <div class="language- extra-class"><pre class="language-text"><code>git log --oneline --author=&quot;jiange&quot;
</code></pre></div><p>查询提交的信息包含某些关键字</p> <div class="language- extra-class"><pre class="language-text"><code>git log --oneline --grep=&quot;关键字&quot;
</code></pre></div><p>通过sourceTree可以直接搜索，在主界面-search-进行搜索</p> <h3 id="_3-5-版本回退"><a href="#_3-5-版本回退" class="header-anchor">#</a> 3.5 版本回退</h3> <p>想要删除上一次commit的内容，可以采用reset版本回退</p> <div class="language- extra-class"><pre class="language-text"><code>git reset [--soft | --mixed | --hard] [HEAD]
</code></pre></div><p>共有三种模式：</p> <table><thead><tr><th>模式</th> <th>mixed</th> <th>soft</th> <th>hard</th></tr></thead> <tbody><tr><td>commit拆除来的文件</td> <td>放回工作目录</td> <td>放回暂缓区</td> <td>直接删除</td></tr></tbody></table> <ul><li><p>mixed
--mixed 为默认，可以不用带该参数，用于重置暂存区的文件与上一次的提交(commit)保持一致，工作区文件内容保持不变。这种方式会重置暂缓区的内容，即把暂缓区的文件给删除，但是不会影响工作区的内容。</p></li> <li><p>soft</p> <p>soft不会删除工作区和暂缓区，将上次的内容退回到暂缓区</p></li> <li><p>hard</p> <p>回退到之前的某个版本，并将这个版本之后的所有改动和提交都删除，这个模式<strong>谨慎使用</strong></p></li></ul> <p>回退方式有两种，一种是<strong>相对回退</strong>，以当前为基准，往前回退多个个版本，还有一种是<strong>绝对回退</strong>，回退到指定版本</p> <p><strong>相对回退：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//退到上一个版本</span>
git reset  HEAD<span class="token operator">^</span> 
<span class="token comment">//退到前两个版本</span>
git reset  HEAD<span class="token operator">^</span><span class="token operator">^</span>

HEAD 说明：
HEAD 表示当前版本
HEAD<span class="token operator">^</span> 上一个版本
HEAD<span class="token operator">^</span><span class="token operator">^</span> 上上一个版本
以此类推<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

可以使用 ～数字表示
HEAD<span class="token operator">~</span><span class="token number">0</span> 表示当前版本
HEAD<span class="token operator">~</span><span class="token number">1</span> 上一个版本
HEAD<span class="token operator">^</span><span class="token number">2</span> 上上一个版本
以此类推<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p><strong>绝对回退：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>//指定要回退的版本sha-1码
git reset  ffb97b5
</code></pre></div><p><strong>版本回退撤销</strong></p> <p>以上所有操作都可以进行版本回退的撤销，包括hard模式</p> <p>版本回退之后又想撤销，回到没有回退的状态</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reset --hard <span class="token function">id</span>
这里的id是通过git log查看到的版本id，可以写一部分即可
</code></pre></div><p>如果忘记版本id，通过下面指令查看</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reflog
</code></pre></div><h3 id="_3-6-撤销修改"><a href="#_3-6-撤销修改" class="header-anchor">#</a> 3.6 撤销修改</h3> <div class="language- extra-class"><pre class="language-text"><code>git checkout -- readme.txt
</code></pre></div><p>命令<code>git checkout -- readme.txt</code>意思就是，把<code>readme.txt</code>文件在工作区的修改全部撤销，这里有两种情况：</p> <p>一种是<code>readme.txt</code>自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p> <p>一种是<code>readme.txt</code>已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</p> <p>总之，就是让这个文件回到最近一次<code>git commit</code>或<code>git add</code>时的状态。</p> <p>该命令就是回到还未add和commit的状态</p> <ul><li><p>查看文件内容</p> <div class="language-java extra-class"><pre class="language-java"><code>cat 文件名
</code></pre></div></li></ul> <p>添加到缓存去后撤销，即执行add还没执行commit</p> <div class="language-ja extra-class"><pre class="language-text"><code>git reset HEAD 文件名
</code></pre></div><p>####总结</p> <p>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code>。</p> <p>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt;file&gt;</code>，就回到了场景1，第二步按场景1操作。</p> <p>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000" target="_blank" rel="noopener noreferrer">版本回退<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一节，不过前提是没有推送到远程库。</p> <h3 id="_3-7-删除文件"><a href="#_3-7-删除文件" class="header-anchor">#</a> 3.7 删除文件</h3> <p>一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用<code>rm</code>命令删了：</p> <div class="language- extra-class"><pre class="language-text"><code>$ rm test.txt
</code></pre></div><p>这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，<code>git status</code>命令会立刻告诉你哪些文件被删除了：</p> <div class="language- extra-class"><pre class="language-text"><code>$ git status
</code></pre></div><p>现在你有两个选择：</p> <ul><li>一是确实要从版本库中删除该文件，那就用命令<code>git rm</code>删掉，并且<code>git commit</code>：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ git rm test.txt
rm 'test.txt'

$ git commit -m &quot;remove test.txt&quot;
[master d46f35e] remove test.txt
 1 file changed, 1 deletion(-)
 delete mode 100644 test.txt
</code></pre></div><p>现在，文件就从版本库中被删除了。</p> <ul><li>另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ git checkout -- test.txt
</code></pre></div><p><code>git checkout</code>其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”</p> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <p>命令<code>git rm</code>用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失**最近一次提交后你修改的内容</p> <h2 id="_4-git常用命令"><a href="#_4-git常用命令" class="header-anchor">#</a> 4 git常用命令</h2> <h3 id="_4-1-工作区命令"><a href="#_4-1-工作区命令" class="header-anchor">#</a> 4.1 工作区命令</h3> <p><strong>清理工作区中未添加到暂缓区的文件，即untracked文件</strong></p> <p>git clean -n</p> <p>是一次clean的演习, 告诉你哪些文件会被删除. 记住他不会真正的删除文件, 只是一个提醒</p> <p>git clean -f</p> <p>删除当前目录下所有没有track过的文件. 他不会删除.gitignore文件里面指定的文件夹和文件, 不管这些文件有没有被track过</p> <p>git clean -f</p> <p>删除指定路径下的没有被track过的文件</p> <p>git clean -df</p> <p>删除当前目录下没有被track过的文件和文件夹</p> <p>git clean -xf</p> <p>删除当前目录下所有没有track过的文件. 不管他是否是.gitignore文件里面指定的文件夹和文件</p> <p>git reset --hard和git clean -f是一对好基友. 结合使用他们能让你的工作目录完全回退到最近一次commit的时候</p> <p>git clean对于刚编译过的项目也非常有用. 如, 他能轻易删除掉编译后生成的.o和.exe等文件. 这个在打包要发布一个release的时候非常有用</p> <h3 id="_4-2-git配置命令"><a href="#_4-2-git配置命令" class="header-anchor">#</a> 4.2 git配置命令</h3> <blockquote><p>查询配置信息</p></blockquote> <ol><li>列出当前配置：<code>git config --list</code>;</li> <li>列出repository配置：<code>git config --local --list</code>;</li> <li>列出全局配置：<code>git config --global --list</code>;</li> <li>列出系统配置：<code>git config --system --list</code>;</li></ol> <blockquote><p>第一次使用git，配置用户信息</p></blockquote> <ol><li>配置用户名：<code>git config --global user.name &quot;your name&quot;</code>;</li> <li>配置用户邮箱：<code>git config --global user.email &quot;youremail@github.com&quot;</code>;</li></ol> <blockquote><p>其他配置</p></blockquote> <ol><li>配置解决冲突时使用哪种差异分析工具，比如要使用vimdiff：<code>git config --global merge.tool vimdiff</code>;</li> <li>配置git命令输出为彩色的：<code>git config --global color.ui auto</code>;</li> <li>配置git使用的文本编辑器：<code>git config --global core.editor vi</code>;</li></ol> <h3 id="_4-3-工作区上的操作命令"><a href="#_4-3-工作区上的操作命令" class="header-anchor">#</a> 4.3 工作区上的操作命令</h3> <blockquote><p>新建仓库</p></blockquote> <ol><li>将工作区中的项目文件使用git进行管理，即创建一个新的本地仓库：<code>git init</code>；</li> <li>从远程git仓库复制项目：<code>git clone &lt;url&gt;</code>，如：git clone git://github.com/wasd/example.git;克隆项目时如果想定义新的项目名，可以在clone命令后指定新的项目名：<code>git clone git://github.com/wasd/example.git mygit</code>；</li></ol> <blockquote><p>提交</p></blockquote> <ol><li>提交工作区所有文件到暂存区：<code>git add .</code></li> <li>提交工作区中指定文件到暂存区：<code>git add &lt;file1&gt; &lt;file2&gt; ...</code>;</li> <li>提交工作区中某个文件夹中所有文件到暂存区：<code>git add [dir]</code>;</li></ol> <blockquote><p>撤销</p></blockquote> <ol><li>删除工作区文件，并且也从暂存区删除对应文件的记录：<code>git rm &lt;file1&gt; &lt;file2&gt;</code>;</li> <li>从暂存区中删除文件，但是工作区依然还有该文件:<code>git rm --cached &lt;file&gt;</code>;</li> <li>取消暂存区已经暂存的文件：<code>git reset HEAD &lt;file&gt;...</code>;</li> <li>撤销上一次对文件的操作：<code>git checkout --&lt;file&gt;</code>。要确定上一次对文件的修改不再需要，如果想保留上一次的修改以备以后继续工作，可以使用stashing和分支来处理；</li> <li>隐藏当前变更，以便能够切换分支：<code>git stash</code>；</li> <li>查看当前所有的储藏：<code>git stash list</code>；</li> <li>应用最新的储藏：<code>git stash apply</code>，如果想应用更早的储藏：<code>git stash apply stash@{2}</code>；重新应用被暂存的变更，需要加上<code>--index</code>参数：<code>git stash apply --index</code>;</li> <li>使用apply命令只是应用储藏，而内容仍然还在栈上，需要移除指定的储藏：<code>git stash drop stash{0}</code>；如果使用pop命令不仅可以重新应用储藏，还可以立刻从堆栈中清除：<code>git stash pop</code>;</li> <li>在某些情况下，你可能想应用储藏的修改，在进行了一些其他的修改后，又要取消之前所应用储藏的修改。Git没有提供类似于 stash unapply 的命令，但是可以通过取消该储藏的补丁达到同样的效果：<code>git stash show -p stash@{0} | git apply -R</code>；同样的，如果你沒有指定具体的某个储藏，Git 会选择最近的储藏：<code>git stash show -p | git apply -R</code>；</li></ol> <blockquote><p>更新文件</p></blockquote> <ol><li>重命名文件，并将已改名文件提交到暂存区：<code>git mv [file-original] [file-renamed]</code>;</li></ol> <blockquote><p>查新信息</p></blockquote> <ol><li>查询当前工作区所有文件的状态：<code>git status</code>;</li> <li>比较工作区中当前文件和暂存区之间的差异，也就是修改之后还没有暂存的内容：git diff；指定文件在工作区和暂存区上差异比较：<code>git diff &lt;file-name&gt;</code>;</li></ol> <h3 id="_4-4-暂存区上的操作命令"><a href="#_4-4-暂存区上的操作命令" class="header-anchor">#</a> 4.4  暂存区上的操作命令</h3> <blockquote><p>提交文件到版本库</p></blockquote> <ol><li>将暂存区中的文件提交到本地仓库中，即打上新版本：<code>git commit -m &quot;commit_info&quot;</code>;</li> <li>将所有已经使用git管理过的文件暂存后一并提交，跳过add到暂存区的过程：<code>git commit -a -m &quot;commit_info&quot;</code>;</li> <li>提交文件时，发现漏掉几个文件，或者注释写错了，可以撤销上一次提交：<code>git commit --amend</code>;</li></ol> <blockquote><p>查看信息</p></blockquote> <ol><li>比较暂存区与上一版本的差异：<code>git diff --cached</code>;</li> <li>指定文件在暂存区和本地仓库的不同：<code>git diff &lt;file-name&gt; --cached</code>;</li> <li>查看提交历史：git log；参数<code>-p</code>展开每次提交的内容差异，用<code>-2</code>显示最近的两次更新，如<code>git log -p -2</code>;</li></ol> <blockquote><p>打标签</p></blockquote> <p>Git 使用的标签有两种类型：<strong>轻量级的（lightweight）和含附注的（annotated）</strong>。轻量级标签就像是个不会变化的分支，实际上它就是个指向特定提交对象的引用。而含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息；当然，如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题。</p> <ol><li>列出现在所有的标签：<code>git tag</code>;</li> <li>使用特定的搜索模式列出符合条件的标签，例如只对1.4.2系列的版本感兴趣：<code>git tag -l &quot;v1.4.2.*&quot;</code>;</li> <li>创建一个含附注类型的标签，需要加<code>-a</code>参数，如<code>git tag -a v1.4 -m &quot;my version 1.4&quot;</code>;</li> <li>使用git show命令查看相应标签的版本信息，并连同显示打标签时的提交对象：<code>git show v1.4</code>;</li> <li>如果有自己的私钥，可以使用GPG来签署标签，只需要在命令中使用<code>-s</code>参数：<code>git tag -s v1.5 -m &quot;my signed 1.5 tag&quot;</code>;</li> <li>验证已签署的标签：git tag -v ，如<code>git tag -v v1.5</code>;</li> <li>创建一个轻量级标签的话，就直接使用git tag命令即可，连<code>-a</code>,<code>-s</code>以及<code>-m</code>选项都不需要，直接给出标签名字即可，如<code>git tag v1.5</code>;</li> <li>将标签推送到远程仓库中：git push origin ，如<code>git push origin v1.5</code>；</li> <li>将本地所有的标签全部推送到远程仓库中：<code>git push origin --tags</code>;</li></ol> <blockquote><p>分支管理</p></blockquote> <ol><li>创建分支：<code>git branch &lt;branch-name&gt;</code>，如<code>git branch testing</code>；</li> <li>从当前所处的分支切换到其他分支：<code>git checkout &lt;branch-name&gt;</code>，如<code>git checkout testing</code>；</li> <li>新建并切换到新建分支上：<code>git checkout -b &lt;branch-name&gt;</code>;</li> <li>删除分支：<code>git branch -d &lt;branch-name&gt;</code>；</li> <li>将当前分支与指定分支进行合并：<code>git merge &lt;branch-name&gt;</code>;</li> <li>显示本地仓库的所有分支：<code>git branch</code>;</li> <li>查看各个分支最后一个提交对象的信息：<code>git branch -v</code>;</li> <li>查看哪些分支已经合并到当前分支：<code>git branch --merged</code>;</li> <li>查看当前哪些分支还没有合并到当前分支：<code>git branch --no-merged</code>;</li> <li>把远程分支合并到当前分支：<code>git merge &lt;remote-name&gt;/&lt;branch-name&gt;</code>，如<code>git merge origin/serverfix</code>；如果是单线的历史分支不存在任何需要解决的分歧，只是简单的将HEAD指针前移，所以这种合并过程可以称为快进（Fast forward），而如果是历史分支是分叉的，会以当前分叉的两个分支作为两个祖先，创建新的提交对象；如果在合并分支时，遇到合并冲突需要人工解决后，再才能提交；</li> <li>在远程分支的基础上创建新的本地分支<code>：git checkout -b &lt;branch-name&gt; &lt;remote-name&gt;/&lt;branch-name&gt;</code>，如<code>git checkout -b serverfix origin/serverfix</code>;</li> <li>从远程分支checkout出来的本地分支，称之为跟踪分支。在跟踪分支上向远程分支上推送内容：<code>git push</code>。该命令会自动判断应该向远程仓库中的哪个分支推送数据；在跟踪分支上合并远程分支：<code>git pull</code>；</li> <li>将一个分支里提交的改变移到基底分支上重放一遍：<code>git rebase &lt;rebase-branch&gt; &lt;branch-name&gt;</code>，如<code>git rebase master server</code>，将特性分支server提交的改变在基底分支master上重演一遍；使用rebase操作最大的好处是像在单个分支上操作的，提交的修改历史也是一根线；如果想把基于一个特性分支上的另一个特性分支变基到其他分支上，可以使用<code>--onto</code>操作：<code>git rebase --onto &lt;rebase-branch&gt; &lt;feature branch&gt; &lt;sub-feature-branch&gt;</code>，如<code>git rebase --onto master server client</code>；使用rebase操作应该遵循的原则是：<strong>一旦分支中的提交对象发布到公共仓库，就千万不要对该分支进行rebase操作</strong>；</li></ol> <h3 id="_4-5-本地仓库上的操作"><a href="#_4-5-本地仓库上的操作" class="header-anchor">#</a> 4.5 本地仓库上的操作</h3> <ol><li>查看本地仓库关联的远程仓库：<code>git remote</code>；在克隆完每个远程仓库后，远程仓库默认为<code>origin</code>;加上<code>-v</code>的参数后，会显示远程仓库的<code>url</code>地址；</li> <li>添加远程仓库，一般会取一个简短的别名：<code>git remote add [remote-name] [url]</code>，比如：<code>git remote add example git://github.com/example/example.git</code>;</li> <li>从远程仓库中抓取本地仓库中没有的更新：<code>git fetch [remote-name]</code>，如<code>git fetch origin</code>;使用fetch只是将远端数据拉到本地仓库，并不自动合并到当前工作分支，只能人工合并。如果设置了某个分支关联到远程仓库的某个分支的话，可以使用<code>git pull</code>来拉去远程分支的数据，然后将远端分支自动合并到本地仓库中的当前分支；</li> <li>将本地仓库某分支推送到远程仓库上：<code>git push [remote-name] [branch-name]</code>，如<code>git push origin master</code>；如果想将本地分支推送到远程仓库的不同名分支：<code>git push &lt;remote-name&gt; &lt;local-branch&gt;:&lt;remote-branch&gt;</code>，如<code>git push origin serverfix:awesomebranch</code>;如果想删除远程分支：<code>git push [romote-name] :&lt;remote-branch&gt;</code>，如<code>git push origin :serverfix</code>。这里省略了本地分支，也就相当于将空白内容推送给远程分支，就等于删掉了远程分支。</li> <li>查看远程仓库的详细信息：<code>git remote show origin</code>；</li> <li>修改某个远程仓库在本地的简称：<code>git remote rename [old-name] [new-name]</code>，如<code>git remote rename origin org</code>；</li> <li>移除远程仓库：<code>git remote rm [remote-name]</code>；</li></ol> <h2 id="_5-文件忽略"><a href="#_5-文件忽略" class="header-anchor">#</a> 5 文件忽略</h2> <p>一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。如下例：</p> <div class="language- extra-class"><pre class="language-text"><code># 忽略某个文件，直接写文件名，例如
a.html
# 忽略所有 .a 结尾的文件
*.a
# 但 lib.a 除外
!lib.a
# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
/TODO
# 忽略 build/ 目录下的所有文件
build/
# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
doc/*.txt
# 忽略 doc/ 目录下所有扩展名为 txt 的文件
doc/**/*.txt
</code></pre></div><h2 id="_6-分支操作"><a href="#_6-分支操作" class="header-anchor">#</a> 6 分支操作</h2> <h3 id="_6-1-分支基本操作"><a href="#_6-1-分支基本操作" class="header-anchor">#</a> 6.1 分支基本操作</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//查看当前所有分支</span>
git branch
<span class="token comment">//创建分支</span>
git branch 分支名
<span class="token comment">//更改分支名称</span>
git branch <span class="token operator">-</span>m 要改的分支名 改后的分支名
<span class="token comment">//删除分支</span>
git branch <span class="token operator">-</span>d 分支名
<span class="token comment">//强行删除未完全合并的分支</span>
git branch <span class="token operator">-</span><span class="token constant">D</span> 分支名
<span class="token comment">//切换分支</span>
git checkout 分支名
</code></pre></div><h4 id="_6-1-1-创建分支"><a href="#_6-1-1-创建分支" class="header-anchor">#</a> 6.1.1 创建分支</h4> <ul><li>创建远程分支</li> <li>创建本地分支
git branch 分支名</li></ul> <h4 id="_6-2-1-查看分支"><a href="#_6-2-1-查看分支" class="header-anchor">#</a> 6.2.1 查看分支</h4> <ul><li>查看远程分支
git branch -a
这个命令查看所有分支，本地和远程，带有remote的就是远程分支</li> <li>查看本地分支
git branch</li></ul> <h4 id="_6-3-1-删除分支"><a href="#_6-3-1-删除分支" class="header-anchor">#</a> 6.3.1 删除分支</h4> <ul><li>删除远程分支</li></ul> <div class="language- extra-class"><pre class="language-text"><code>查看所有分支：git branch -a 
结果如下：
* master
  remotes/origin/master
  remotes/origin/todolist-2
  
  下面这两个表示远程分支
  remotes/origin/master
  remotes/origin/todolist-2
  删除远程分支
  git push origin --delete todolist-2
  再执行git branch -a可看到删除的分支已经没有了
  
</code></pre></div><ul><li>删除本地分支</li></ul> <div class="language- extra-class"><pre class="language-text"><code>git branch -d &lt;name&gt;
注意：如果现在正处于该分支上，就不能删除，切换到其他分支就可以了
</code></pre></div><p>创建分支：<code>git branch 分支名</code></p> <p>切换分支：`git checkout 分支名</p> <p>创建+切换分支：`git checkout -b 分支名</p> <p>合并某分支到当前分支：`git merge 分支名</p> <p>git切换分支时，如果有未untracked文件，切换分支这个文件是不会随着分支切换而改变**</p> <h3 id="_6-2-分支合并"><a href="#_6-2-分支合并" class="header-anchor">#</a> 6.2 分支合并</h3> <p>分支合并有两种方式，一种是merge，一种是rebase</p> <h3 id="_6-3-合并冲突"><a href="#_6-3-合并冲突" class="header-anchor">#</a> 6.3 合并冲突</h3> <h3 id="_6-4-合并取消"><a href="#_6-4-合并取消" class="header-anchor">#</a> 6.4 合并取消</h3> <p>merge合并方式</p> <div class="language- extra-class"><pre class="language-text"><code>git reset --hard head^
</code></pre></div><p>rebase合并方式</p> <p>方案1：</p> <p>通过reflog查看rebase之前的最近一次提交记录</p> <p>通过reset回到指定版本</p> <p>方案2：</p> <p>使用ORIG_HEAD，这个是在git文件夹中能看到，作用是记录最近一次危险操作前的head位置。危险操作包括merge、rebase、reset</p> <div class="language- extra-class"><pre class="language-text"><code>git reset --hard ORIG_HEAD
</code></pre></div><h3 id="_6-5-更改commit"><a href="#_6-5-更改commit" class="header-anchor">#</a> 6.5 更改commit</h3> <p>更改commit有三种方式</p> <table><thead><tr><th>指令</th> <th>修改历史记录</th> <th>说明</th></tr></thead> <tbody><tr><td>reset</td> <td>是</td> <td>把当前的状态设置为某个指定的commit状态，通常适用于尚未推出去的commit</td></tr> <tr><td>rebase</td> <td>是</td> <td>不管是新增，改动、删除commit，都很方便，但通常适用于尚未推出去的commit</td></tr> <tr><td>revert</td> <td>是</td> <td>新增一个commit来取消另一个commit的内容，原来的commit依旧会保留在历史记录中，通常适用于已经推出去的commit内容</td></tr></tbody></table> <h3 id="_6-5-从历史commit创建分支"><a href="#_6-5-从历史commit创建分支" class="header-anchor">#</a> 6.5 从历史commit创建分支</h3> <h2 id="_7-远程分支"><a href="#_7-远程分支" class="header-anchor">#</a> 7 远程分支</h2> <h3 id="_7-1-连接远程仓库"><a href="#_7-1-连接远程仓库" class="header-anchor">#</a> 7.1 连接远程仓库</h3> <div class="language- extra-class"><pre class="language-text"><code>git remote add origin git@github.com:michaelliao/learngit.git
</code></pre></div><p>添加后，远程库的名字就是<code>origin</code>，这是Git默认的叫法，也可以改成别的，但是<code>origin</code>这个名字一看就知道是远程库</p> <p>查看连接的远程地址：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>git remote <span class="token operator">-</span>v
</code></pre></div><h3 id="_7-2-推送文件到远程库"><a href="#_7-2-推送文件到远程库" class="header-anchor">#</a> 7.2 推送文件到远程库</h3> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">git</span> push -u origin master
</code></pre></div><p>把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p> <p>由于远程库是空的，我们第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。</p> <h3 id="_7-3-克隆远程仓库"><a href="#_7-3-克隆远程仓库" class="header-anchor">#</a> 7.3 克隆远程仓库</h3> <p>克隆github已经存在的远程仓库</p> <p>不指定分支名</p> <div class="language- extra-class"><pre class="language-text"><code>git clone git@github.com:账户名/仓库名.git
</code></pre></div><p>指定分支名</p> <p>git clone -b 分支名 地址</p> <p>git clone -b dev_jk http://10.1.1.11/service/tmall-service.git</p> <h2 id="_8-git开发流程"><a href="#_8-git开发流程" class="header-anchor">#</a> 8 git开发流程</h2> <div class="language- extra-class"><pre class="language-text"><code>进入项目文件夹
git init //项目初始化，创建一个git仓库
git add 文件夹名/文件名  //添加文件到git仓库
git commit -m &quot;提交的时候输入的内容&quot; //提交文件到git仓库
git remote add origin git@github.com:michaelliao/learngit.git //连接远程仓库
git push -u origin master //推送当前分支到远程仓库

更新git 分支
1. 切换到分支（这个分支为自己从哪个分支里面创建的分支）git checkout feature/twoway-qzj 
2. git pull 拉取分支的最新内容
3. 切换回自己的分支，在自己的分支上执行 git merge --no-ff feature/twoway，意思是将feature/twoway合并到自己的分支
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed392c7e.js" defer></script><script src="/assets/js/2.e61ebc2f.js" defer></script><script src="/assets/js/41.da785b17.js" defer></script>
  </body>
</html>
