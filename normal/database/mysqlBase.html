<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql数据库 | UFO基地</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hello, my friend!">
    
    <link rel="preload" href="/assets/css/0.styles.d4bf95f4.css" as="style"><link rel="preload" href="/assets/js/app.ed392c7e.js" as="script"><link rel="preload" href="/assets/js/2.e61ebc2f.js" as="script"><link rel="preload" href="/assets/js/37.01e1887e.js" as="script"><link rel="prefetch" href="/assets/js/10.0c2a5e6f.js"><link rel="prefetch" href="/assets/js/11.65763309.js"><link rel="prefetch" href="/assets/js/12.62bd7cd5.js"><link rel="prefetch" href="/assets/js/13.84fd7b00.js"><link rel="prefetch" href="/assets/js/14.76172ee6.js"><link rel="prefetch" href="/assets/js/15.3ad856d8.js"><link rel="prefetch" href="/assets/js/16.3ac7f06b.js"><link rel="prefetch" href="/assets/js/17.65a246fc.js"><link rel="prefetch" href="/assets/js/18.cb772baf.js"><link rel="prefetch" href="/assets/js/19.f76cfbf3.js"><link rel="prefetch" href="/assets/js/20.dc8d8d82.js"><link rel="prefetch" href="/assets/js/21.687a969a.js"><link rel="prefetch" href="/assets/js/22.137fa288.js"><link rel="prefetch" href="/assets/js/23.14cbc642.js"><link rel="prefetch" href="/assets/js/24.0aeeb403.js"><link rel="prefetch" href="/assets/js/25.7fa9db84.js"><link rel="prefetch" href="/assets/js/26.44e82cd1.js"><link rel="prefetch" href="/assets/js/27.fa31f48f.js"><link rel="prefetch" href="/assets/js/28.8e011d93.js"><link rel="prefetch" href="/assets/js/29.ce077aa3.js"><link rel="prefetch" href="/assets/js/3.604382ba.js"><link rel="prefetch" href="/assets/js/30.79ecda02.js"><link rel="prefetch" href="/assets/js/31.ee3c01fc.js"><link rel="prefetch" href="/assets/js/32.c985f1e2.js"><link rel="prefetch" href="/assets/js/33.44200f11.js"><link rel="prefetch" href="/assets/js/34.c649ac18.js"><link rel="prefetch" href="/assets/js/35.2a6ddc50.js"><link rel="prefetch" href="/assets/js/36.bef21df1.js"><link rel="prefetch" href="/assets/js/38.6d4a1211.js"><link rel="prefetch" href="/assets/js/39.dde25747.js"><link rel="prefetch" href="/assets/js/4.b3d7061b.js"><link rel="prefetch" href="/assets/js/40.32c4bbff.js"><link rel="prefetch" href="/assets/js/41.da785b17.js"><link rel="prefetch" href="/assets/js/42.c3c277b4.js"><link rel="prefetch" href="/assets/js/5.abedb45c.js"><link rel="prefetch" href="/assets/js/6.73c063ed.js"><link rel="prefetch" href="/assets/js/7.b4e343ac.js"><link rel="prefetch" href="/assets/js/8.b05dfa12.js"><link rel="prefetch" href="/assets/js/9.823e2c0f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4bf95f4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">UFO基地</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontBase/html/htmlBase.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/css/cssBase.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/javascript/string.html" class="nav-link">
  javascript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/vue/vueBase.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/react/reactBase.html" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/nodejs/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          web基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/webTech/browser/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/ajax/ajax.html" class="nav-link">
  ajax
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/http/http.html" class="nav-link">
  http
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/optimize/optimize.html" class="nav-link">
  性能优化
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用" class="dropdown-title"><span class="title">通用</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用" class="mobile-dropdown-title"><span class="title">通用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/normal/github/gitNotes.html" class="nav-link">
  git文档
</a></li><li class="dropdown-item"><!----> <a href="/normal/algorithm/dataStructure.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/normal/nginx/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/normal/database/mysqlBase.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  数据库
</a></li><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/normal/editTool/idea/idea.html" class="nav-link">
  idea
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vscode/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vim/vim.html" class="nav-link">
  vim
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/frontFramework/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontBase/html/htmlBase.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/css/cssBase.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontBase/javascript/string.html" class="nav-link">
  javascript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/vue/vueBase.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/react/reactBase.html" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/nodejs/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frontFrame/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          web基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/webTech/browser/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/ajax/ajax.html" class="nav-link">
  ajax
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/http/http.html" class="nav-link">
  http
</a></li><li class="dropdown-subitem"><a href="/frontEnd/webTech/optimize/optimize.html" class="nav-link">
  性能优化
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用" class="dropdown-title"><span class="title">通用</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用" class="mobile-dropdown-title"><span class="title">通用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/normal/github/gitNotes.html" class="nav-link">
  git文档
</a></li><li class="dropdown-item"><!----> <a href="/normal/algorithm/dataStructure.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/normal/nginx/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/normal/database/mysqlBase.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  数据库
</a></li><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/normal/editTool/idea/idea.html" class="nav-link">
  idea
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vscode/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-subitem"><a href="/normal/editTool/vim/vim.html" class="nav-link">
  vim
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/frontFramework/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/normal/database/mysqlBase.html" aria-current="page" class="active sidebar-link">mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_1-安装" class="sidebar-link">1 安装</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_2-数据管理工具" class="sidebar-link">2 数据管理工具</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_3-常见命令" class="sidebar-link">3 常见命令</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_4-sql语句" class="sidebar-link">4 sql语句</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_5-数据库的管理" class="sidebar-link">5 数据库的管理</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_6-表的管理" class="sidebar-link">6 表的管理</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_7-数据类型" class="sidebar-link">7 数据类型</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_8-数据库完整性" class="sidebar-link">8 数据库完整性</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_9-事务" class="sidebar-link">9 事务</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_10-视图" class="sidebar-link">10 视图</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_11-变量" class="sidebar-link">11 变量</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_12-存储过程" class="sidebar-link">12 存储过程</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_13-函数" class="sidebar-link">13 函数</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_14-流程控制结构" class="sidebar-link">14 流程控制结构</a></li><li class="sidebar-sub-header"><a href="/normal/database/mysqlBase.html#_15-数据库设计" class="sidebar-link">15 数据库设计</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql数据库"><a href="#mysql数据库" class="header-anchor">#</a> mysql数据库</h1> <p>MySQL 是最流行的关系型数据库管理系统</p> <h2 id="_1-安装"><a href="#_1-安装" class="header-anchor">#</a> 1 安装</h2> <h3 id="_1-1-下载安装"><a href="#_1-1-下载安装" class="header-anchor">#</a> 1.1 下载安装</h3> <ol><li><p>MySQL 的安装同样建议采用解压版（目的是了解那些自动安装过程都做了哪些事）</p> <p>下载地址<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/mysql/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>解压到纯英文路径</p></li> <li><p>解压目录添加 my.ini （可选）</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>[mysqld]
# MySQL 安装目录，这里的路径可选
basedir=C:/Develop/mysql
# 数据文件所在目录，这里的路径可选
datadir=C:/Develop/mysql/data



添加my.ini文件内容，这里是配置MySQL文件
[mysqld]
# 设置默认字符集，只会影响新建数据库的默认字符集
character-set-server=utf8

</code></pre></div><ol start="4"><li>以<strong>管理员身份</strong>运行 CMD 执行以下命令，安装一个 MySQL 服务</li></ol> <div class="language- extra-class"><pre class="language-text"><code># 定位到安装目录下的 bin 文件夹
$ cd &lt;MySQL安装目录&gt;/bin
# 初始化数据所需文件以及获取一个临时的访问密码
$ mysqld ‐‐initialize ‐‐user=mysql ‐‐console
# 将 MySQL 安装为服务 可以指定服务名称
$ mysqld ‐‐install MySQL
</code></pre></div><h3 id="_1-2-进入数据库"><a href="#_1-2-进入数据库" class="header-anchor">#</a> 1.2  进入数据库</h3> <div class="language- extra-class"><pre class="language-text"><code>//先要进入数据库的bin目录下
C:\Windows\system32&gt;cd C:\Develop\mysql\bin

C:\Develop\mysql\bin&gt;mysqld --initialize --user=mysql --console
2017-10-27T07:55:14.689417Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2017-10-27T07:55:15.021383Z 0 [Warning] InnoDB: New log files created, LSN=45790
2017-10-27T07:55:15.095580Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
2017-10-27T07:55:15.166801Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 2ad3e9db-baec-11e7-b1fe-e03f49da4d50.
2017-10-27T07:55:15.171806Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
2017-10-27T07:55:15.175824Z 1 [Note] A temporary password is generated for root@localhost: CsN2toUSm&amp;dF

C:\Develop\mysql\bin&gt;mysqld --install MySQL
Service successfully installed.

//启动数据库

C:\Develop\mysql\bin&gt;net start MySQL
MySQL 服务正在启动 .
MySQL 服务已经启动成功。

//进入数据库
C:\Develop\mysql\bin&gt;mysql -u root -p
Enter password: ************
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.19

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

//设置密码  注意：进入数据库之后的mysql命令都要加分号
mysql&gt; set password for root@localhost = password('123456');
Query OK, 0 rows affected, 1 warning (0.00 sec)

//退出数据库
mysql&gt; exit;
Bye

//登录
C:\Develop\mysql\bin&gt;mysql -u root -p
Enter password: ******
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.19 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

//查看数据库
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.00 sec)

mysql&gt; exit;
Bye

C:\Develop\mysql\bin&gt;

</code></pre></div><h3 id="_1-3-删除服务"><a href="#_1-3-删除服务" class="header-anchor">#</a> 1.3    删除服务</h3> <p>管理员身份运行cmd，任意目录下执行：</p> <p>sc  delete  服务名称</p> <p>然后再删除之前解压存放的文件即可</p> <h3 id="_1-4-启动停止服务"><a href="#_1-4-启动停止服务" class="header-anchor">#</a> 1.4 启动停止服务</h3> <p>方式一：计算机——右击管理——服务
方式二：通过管理员身份运行
net start 服务名（启动服务）
net stop 服务名（停止服务）</p> <h2 id="_2-数据管理工具"><a href="#_2-数据管理工具" class="header-anchor">#</a> 2 数据管理工具</h2> <h3 id="_2-1-命令行工具"><a href="#_2-1-命令行工具" class="header-anchor">#</a> 2.1 命令行工具</h3> <p>一般如果只是简单操作数据库，推荐使用 MySQL 内置的命令行工具完成：</p> <p>通过命令行运行解压目录下 bin 目录中的 mysql.exe ：</p> <div class="language- extra-class"><pre class="language-text"><code># 定位到 bin 目录
$ cd &lt;解压目录&gt;/bin
# 运行 mysql，‐u 指定数据库用户名，‐p 指定密码
$ mysql ‐u root ‐p wanglei
# 一般不建议在命令中填写密码，因为这样会暴露你的密码，一般只加一个 ‐p 但是不给值
$ mysql ‐u root ‐p
Enter password: # 这时会要求你输入密码
</code></pre></div><p>进入 MySQL 客户端的 REPL 环境过后，可以通过标准的 SQL 语句操作数据库。
常见的操作指令：</p> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; show databases; ‐‐ 显示全部数据库
mysql&gt; create database &lt;db‐name&gt;; ‐‐ 创建一个指定名称的数据库
mysql&gt; use &lt;db‐name&gt;; ‐‐ 使用一个数据库，相当于进入指定的数据库
mysql&gt; show tables; ‐‐ 显示当前数据库中有哪些表
mysql&gt; create table &lt;table‐name&gt; (id int, name varchar(20), age int); ‐‐ 创建一个指定名称的数据
表，并添加 3 个列
mysql&gt; desc &lt;table‐name&gt;; ‐‐ 查看指定表结构
mysql&gt; source ./path/to/sql‐file.sql ‐‐ 执行本地 SQL 文件中的 SQL 语句
mysql&gt; drop table &lt;table‐name&gt;; ‐‐ 删除一个指定名称的数据表
mysql&gt; drop database &lt;db‐name&gt;; ‐‐ 删除一个指定名称的数据库
mysql&gt; exit|quit; ‐‐ 退出数据库终端
</code></pre></div><p>查看服务器的版本
方式一：登录到mysql服务端
select version();
方式二：没有登录到mysql服务端
mysql --version
或
mysql --V</p> <h3 id="_2-2-可视化管理工具"><a href="#_2-2-可视化管理工具" class="header-anchor">#</a> 2.2 可视化管理工具</h3> <ul><li>如果需要复杂的操作，推荐 Navicat Premium
下载地址：http://www.navicat.com.cn/download/navicat-premium
这是一个付费软件，可以免费试用 14 天</li> <li>mysql workbench</li></ul> <h2 id="_3-常见命令"><a href="#_3-常见命令" class="header-anchor">#</a> 3 常见命令</h2> <table><thead><tr><th>命令</th> <th></th> <th>命令</th> <th></th></tr></thead> <tbody><tr><td>查看所有数据库</td> <td>show databases；</td> <td>打开指定的数据库</td> <td>use 数据库名；</td></tr> <tr><td>查看当前库的所有表</td> <td>show tables；</td> <td>查看其它库的所有表</td> <td>show tables from 库名;</td></tr> <tr><td>查看当前处于哪个表</td> <td>select database();</td> <td>查看表结构</td> <td>desc 表明；</td></tr> <tr><td>查看数据库版本</td> <td>select version();</td> <td></td> <td></td></tr></tbody></table> <h2 id="_4-sql语句"><a href="#_4-sql语句" class="header-anchor">#</a> 4 sql语句</h2> <h3 id="_4-1-查询"><a href="#_4-1-查询" class="header-anchor">#</a> 4.1 查询</h3> <h4 id="_1-基础查询"><a href="#_1-基础查询" class="header-anchor">#</a> 1 基础查询</h4> <p>基本结构</p> <div class="language- extra-class"><pre class="language-text"><code>select
	字段列表
from
	表名列表
where
	条件列表
group by
	分组字段
having
	分组之后的条件
order by
	排序
limit
	分页限定
</code></pre></div><p>语法：
select 查询列表 from 表名;</p> <p>特点：</p> <ul><li>查询列表可以是：表中的字段、常量值、表达式、函数</li> <li>查询的结果是一个虚拟的表格</li></ul> <p>1.查询表中的单个字段</p> <p>SELECT last_name FROM employees;</p> <p>2.查询表中的多个字段</p> <p>SELECT last_name,salary,email FROM employees;</p> <p>3.查询表中的所有字段</p> <p>SELECT * FROM employees;</p> <div class="language- extra-class"><pre class="language-text"><code>//如果字段和SQL关键字一样，可以采用``反引号包起来进行区分
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#7.起别名</span>
 <span class="token comment">/*
 ①便于理解
 ②如果要查询的字段有重名的情况，使用别名可以区分开来 
 */</span>
 <span class="token comment">#方式一：使用as</span>
<span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">%</span><span class="token number">98</span> <span class="token keyword">AS</span> 结果<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> last_name <span class="token keyword">AS</span> 姓<span class="token punctuation">,</span>first_name <span class="token keyword">AS</span> 名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">#方式二：使用空格</span>
<span class="token keyword">SELECT</span> last_name 姓<span class="token punctuation">,</span>first_name 名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">#案例：查询salary，显示结果为 out put</span>
<span class="token keyword">SELECT</span> salary <span class="token keyword">AS</span> <span class="token string">&quot;out put&quot;</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">#8.去重</span>
<span class="token comment">#案例：查询员工表中涉及到的所有的部门编号</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> department_id <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">#9.字段拼接</span>

<span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 结果<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> 
	CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> 姓名
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-条件查询"><a href="#_2-条件查询" class="header-anchor">#</a> 2 条件查询</h4> <p>语法：
select
查询列表
from
表名
where
筛选条件;</p> <div class="language- extra-class"><pre><code>分类：
一、按条件表达式筛选
简单条件运算符：&gt; &lt; = != &lt;&gt; &gt;= &lt;=

二、按逻辑表达式筛选
逻辑运算符：
作用：用于连接条件表达式
	&amp;&amp; || !
	and or not
    
&amp;&amp;和and：两个条件都为true，结果为true，反之为false
||或or： 只要有一个条件为true，结果为true，反之为false
!或not： 如果连接的条件本身为false，结果为true，反之为false

三、模糊查询
	like
	between and
	in
	is null
</code></pre></div><p>一、按条件表达式筛选</p> <p>案例1：查询工资&gt;12000的员工信息</p> <p>SELECT
*FROM
employees
WHERE
salary&gt;12000;</p> <p>案例2：查询部门编号不等于90号的员工名和部门编号</p> <p>SELECT
last_name,
department_id
FROM
employees
WHERE
department_id&lt;&gt;90;</p> <p>二、按逻辑表达式筛选</p> <p>案例1：查询工资z在10000到20000之间的员工名、工资以及奖金</p> <p>SELECT
last_name,
salary,
commission_pct
FROM
employees
WHERE
salary&gt;=10000 AND salary&lt;=20000;</p> <p>案例2：查询部门编号不是在90到110之间，或者工资高于15000的员工信息</p> <p>SELECT
*
FROM
employees
WHERE
NOT(department_id&gt;=90 AND  department_id&lt;=110) OR salary&gt;15000;</p> <p>三、模糊查询</p> <p>/*
like	
between and
in
is null|is not null</p> <p>*/</p> <p><strong>1.like</strong></p> <p>/*
特点：
①一般和通配符搭配使用
通配符：
% 任意多个字符,包含0个字符
_ 任意单个字符
*、</p> <p>案例1：查询员工名中包含字符a的员工信息</p> <p>select
*
from
employees
where
last_name like '%a%';#abc</p> <p>案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p> <p>select
last_name,
salary
FROM
employees
WHERE
last_name LIKE '__n_l%';</p> <p>案例3：查询员工名中第二个字符为_的员工名</p> <p>SELECT
last_name
FROM
employees
WHERE
last_name LIKE '<em>$</em>%' ESCAPE '$';</p> <p>2.between and</p> <p>/*
①使用between and 可以提高语句的简洁度
②包含临界值
③两个临界值不要调换顺序</p> <p>*/</p> <p>案例1：查询员工编号在100到120之间的员工信息</p> <p>SELECT
*
FROM
employees
WHERE
employee_id &gt;= 120 AND employee_id&lt;=100；</p> <p>SELECT
*
FROM
employees
WHERE
employee_id BETWEEN 120 AND 100;</p> <p>3.in</p> <p>/*
含义：判断某字段的值是否属于in列表中的某一项
特点：
①使用in提高语句简洁度
②in列表的值类型必须一致或兼容
③in列表中不支持通配符</p> <p>案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</p> <p>SELECT
last_name,
job_id
FROM
employees
WHERE
job_id = 'IT_PROT' OR job_id = 'AD_VP' OR JOB_ID ='AD_PRES';</p> <p>SELECT
last_name,
job_id
FROM
employees
WHERE
job_id IN( 'IT_PROT' ,'AD_VP','AD_PRES');</p> <p>4、is null</p> <p>/*
=或&lt;&gt;不能用于判断null值
is null或is not null 可以判断null值</p> <p>*/</p> <p>案例1：查询没有奖金的员工名和奖金率</p> <p>SELECT
last_name,
commission_pct
FROM
employees
WHERE
commission_pct IS NULL;</p> <p>案例1：查询有奖金的员工名和奖金率</p> <p>SELECT
last_name,
commission_pct
FROM
employees
WHERE
commission_pct IS NOT NULL;</p> <p>安全等于  &lt;=&gt;</p> <p>案例1：查询没有奖金的员工名和奖金率</p> <p>SELECT
last_name,
commission_pct
FROM
employees
WHERE
commission_pct &lt;=&gt;NULL;</p> <p>案例2：查询工资为12000的员工信息</p> <p>SELECT
last_name,
salary
FROM
employees</p> <p>WHERE
salary &lt;=&gt; 12000;</p> <p>is null pk &lt;=&gt;</p> <p>IS NULL:仅仅可以判断NULL值，可读性较高，建议使用
&lt;=&gt;    :既可以判断NULL值，又可以判断普通的数值，可读性较低</p> <h2 id="_5-数据库的管理"><a href="#_5-数据库的管理" class="header-anchor">#</a> 5 数据库的管理</h2> <h3 id="_5-1-库的创建"><a href="#_5-1-库的创建" class="header-anchor">#</a> 5.1  库的创建</h3> <p>/*
语法：
create database  [if not exists]库名;
*/</p> <p>案例：创建库Books</p> <p>CREATE DATABASE IF NOT EXISTS books ;</p> <h3 id="_5-2-库的修改"><a href="#_5-2-库的修改" class="header-anchor">#</a> 5.2 库的修改</h3> <p>RENAME DATABASE books TO 新库名;</p> <p>更改库的字符集</p> <p>ALTER DATABASE books CHARACTER SET gbk;</p> <h3 id="_5-3-库的删除"><a href="#_5-3-库的删除" class="header-anchor">#</a> 5.3 库的删除</h3> <p>DROP DATABASE IF EXISTS books;</p> <h2 id="_6-表的管理"><a href="#_6-表的管理" class="header-anchor">#</a> 6 表的管理</h2> <h3 id="_6-1-表的创建"><a href="#_6-1-表的创建" class="header-anchor">#</a> 6.1 表的创建</h3> <p>/*
语法：
create table 表名(
列名 列的类型【(长度) 约束】,
列名 列的类型【(长度) 约束】,
列名 列的类型【(长度) 约束】,
...
列名 列的类型【(长度) 约束】</p> <p>)</p> <p>*/</p> <p>案例：创建表Book</p> <p>CREATE TABLE book(
id INT,#编号
bName VARCHAR(20),#图书名
price DOUBLE,#价格
authorId  INT,#作者编号
publishDate DATETIME#出版日期</p> <p>);</p> <p>DESC book;</p> <h3 id="_6-2-表的修改"><a href="#_6-2-表的修改" class="header-anchor">#</a> 6.2 表的修改</h3> <p>/*
语法
alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</p> <p>*/</p> <p>①修改列名</p> <p>ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</p> <p>②修改列的类型或约束</p> <p>ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</p> <p>③添加新列</p> <p>ALTER TABLE author ADD COLUMN annual DOUBLE;</p> <p>④删除列</p> <p>ALTER TABLE book_author DROP COLUMN  annual;</p> <p>⑤修改表名</p> <p>ALTER TABLE author RENAME TO book_author;</p> <p>DESC book;</p> <h3 id="_6-3-表的删除"><a href="#_6-3-表的删除" class="header-anchor">#</a> 6.3 表的删除</h3> <p>DROP TABLE IF EXISTS book_author;</p> <p>SHOW TABLES;</p> <h3 id="_6-4-表的复制"><a href="#_6-4-表的复制" class="header-anchor">#</a> 6.4 表的复制</h3> <p>INSERT INTO author VALUES
(1,'村上春树','日本'),
(2,'莫言','中国'),
(3,'冯唐','中国'),
(4,'金庸','中国');</p> <p>SELECT * FROM Author;
SELECT * FROM copy2;</p> <ol><li>仅仅复制表的结构</li></ol> <p>CREATE TABLE copy LIKE author;</p> <ol start="2"><li>复制表的结构+数据</li></ol> <p>CREATE TABLE copy2
SELECT * FROM author;</p> <ol start="3"><li>只复制部分数据</li></ol> <p>CREATE TABLE copy3
SELECT id,au_name
FROM author
WHERE nation='中国';</p> <ol start="4"><li>仅仅复制某些字段</li></ol> <p>CREATE TABLE copy4
SELECT id,au_name
FROM author
WHERE 0;</p> <h2 id="_7-数据类型"><a href="#_7-数据类型" class="header-anchor">#</a> 7 数据类型</h2> <h3 id="_7-1-整型"><a href="#_7-1-整型" class="header-anchor">#</a> 7.1 整型</h3> <table><thead><tr><th>整数类型</th> <th>字节</th> <th>范围</th></tr></thead> <tbody><tr><td>Tinyint</td> <td>1</td> <td>有符号： -128~127 无符号： 0~255</td></tr> <tr><td>Smallint</td> <td>2</td> <td>有符号： -32768~32767 无符号： 0~65535</td></tr> <tr><td>Mediumint</td> <td>3</td> <td>有符号： -8388608~8388607 <br>无符号： 0~1677215</td></tr> <tr><td>Int、 integer</td> <td>4</td> <td>有符号： - 2147483648~2147483647 <br>无符号： 0~4294967295</td></tr> <tr><td>Bigint</td> <td>8</td> <td>有符号： -9223372036854775808 ~9223372036854775807<br> 无符号： 0~ 9223372036854775807*2+1</td></tr></tbody></table> <p>特点：</p> <ul><li><p>如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字</p></li> <li><p>如果插入的数值超出了整型的范围,会报out of range异常，并且插入临界值</p></li> <li><p>如果不设置长度，会有默认的长度</p></li> <li><p>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用！</p> <p>小数：
浮点型
定点型
字符型：
日期型：
Blob类型：</p></li></ul> <h3 id="_7-2-小数"><a href="#_7-2-小数" class="header-anchor">#</a> 7.2 小数</h3> <table><thead><tr><th>浮点数类型</th> <th>字节</th> <th>范围</th></tr></thead> <tbody><tr><td>float</td> <td>4</td> <td>±1.75494351E-38~±3.402823466E+38</td></tr> <tr><td>double</td> <td>8</td> <td>±2.2250738585072014E-308~ ±1.7976931348623157E+308</td></tr> <tr><td>定点数类型</td> <td>字节</td> <td>范围</td></tr> <tr><td>DEC(M,D) DECIMAL(M,D)</td> <td>M+2</td> <td>最大取值范围与double相同， 给定decimal的有效取值范围由M和D 决定</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code>分类：
1.浮点型
float(M,D)
double(M,D)
2.定点型
dec(M，D)
decimal(M,D)

特点：

①
M：整数部位+小数部位
D：小数部位
如果超过范围，则插入临界值

②
M和D都可以省略
如果是decimal，则M默认为10，D默认为0
如果是float和double，则会根据插入的数值的精度来决定精度

③定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用
</code></pre></div><h3 id="_7-3-字符型"><a href="#_7-3-字符型" class="header-anchor">#</a> 7.3 字符型</h3> <p>较短的文本：</p> <p>char
varchar</p> <p>其他：</p> <p>binary和varbinary用于保存较短的二进制
enum用于保存枚举
set用于保存集合</p> <p>较长的文本：
text
blob(较大的二进制)</p> <p>特点：</p> <table><thead><tr><th>写法</th> <th>M的意思</th> <th>特点</th> <th>空间的耗费</th> <th>效率</th></tr></thead> <tbody><tr><td>char(M)</td> <td>最大的字符数，可以省略，默认为1</td> <td>固定长度的字符</td> <td>比较耗费</td> <td>高</td></tr> <tr><td>varchar(M)</td> <td>最大的字符数，不可以省略</td> <td>可变长度的字符</td> <td>比较节省</td> <td>低</td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="_7-4-日期"><a href="#_7-4-日期" class="header-anchor">#</a> 7.4 日期</h3> <table><thead><tr><th>日期和时间类型</th> <th>字节</th> <th>最小值</th> <th>最大值</th></tr></thead> <tbody><tr><td>date</td> <td>4</td> <td>1000-01-01</td> <td>9999-12-31</td></tr> <tr><td>datetime</td> <td>8</td> <td>1000-01-01 00:00:00</td> <td>9999-12-31 23:59:59</td></tr> <tr><td>timestamp</td> <td>4</td> <td>19700101080001</td> <td>2038年的某个时刻</td></tr> <tr><td>time</td> <td>3</td> <td>-838:59:59</td> <td>838:59:59</td></tr> <tr><td>year</td> <td>1</td> <td>1901</td> <td>2155</td></tr></tbody></table> <p>特点：</p> <ul><li>Timestamp支持的时间范围较小，取值范围：19700101080001——2038年的某个时间，Datetime的取值范围：1000-1-1 ——9999—12-31</li> <li>imestamp和实际时区有关，更能反映实际的日期，而datetime则只能反映出插入时的当地时区</li> <li>timestamp的属性受Mysql版本和SQLMode的影响很大</li></ul> <h2 id="_8-数据库完整性"><a href="#_8-数据库完整性" class="header-anchor">#</a> 8 数据库完整性</h2> <p>8.1 约束</p> <ul><li>为了保证数据的一致性和完整性， SQL规范以约
束的方式对表数据进行额外的条件限制。</li> <li>约束是表级的强制规定</li> <li>可以在创建表时规定约束（通过 CREATE
TABLE 语句），或者在表创建之后也可以（通
过 ALTER TABLE 语句）</li></ul> <p>有以下六种约束:
– NOT NULL 非空约束，规定某个字段不能为空
– UNIQUE 唯一约束，规定某个字段在整个表中是唯一的
– PRIMARY KEY 主键(非空且唯一)
– FOREIGN KEY 外键
– CHECK 检查约束
– DEFAULT 默认值</p> <p>约束的添加分类：
列级约束：
六大约束语法上都支持，但外键约束没有效果</p> <div class="language- extra-class"><pre><code>表级约束：
	
	除了非空、默认，其他的都支持
</code></pre></div><p>​		
主键和唯一的大对比：</p> <div class="language- extra-class"><pre><code>保证唯一性  是否允许为空    一个表中可以有多少个   是否允许组合
主键	√		×		     至多有1个           √，但不推荐
唯一	√		√		     可以有多个          √，但不推荐
</code></pre></div><p>外键：
1、要求在从表设置外键关系
2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求
3、主表的关联列必须是一个key（一般是主键或唯一）
4、插入数据时，先插入主表，再插入从表
删除数据时，先删除从表，再删除主表</p> <div class="language- extra-class"><pre class="language-text"><code>#二、修改表时添加约束

/*
1、添加列级约束
alter table 表名 modify column 字段名 字段类型 新约束;

2、添加表级约束
alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;


*/
DROP TABLE IF EXISTS stuinfo;
CREATE TABLE stuinfo(
	id INT,
	stuname VARCHAR(20),
	gender CHAR(1),
	seat INT,
	age INT,
	majorid INT
)
DESC stuinfo;
#1.添加非空约束
ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;
#2.添加默认约束
ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;
#3.添加主键
#①列级约束
ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;
#②表级约束
ALTER TABLE stuinfo ADD PRIMARY KEY(id);

#4.添加唯一

#①列级约束
ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;
#②表级约束
ALTER TABLE stuinfo ADD UNIQUE(seat);


#5.添加外键
ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); 

#三、修改表时删除约束

#1.删除非空约束
ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;

#2.删除默认约束
ALTER TABLE stuinfo MODIFY COLUMN age INT ;

#3.删除主键
ALTER TABLE stuinfo DROP PRIMARY KEY;

#4.删除唯一
ALTER TABLE stuinfo DROP INDEX seat;

#5.删除外键
ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;

SHOW INDEX FROM stuinfo;
</code></pre></div><p>###8.2 标识列
又称为自增长列
含义：可以不用手动的插入值，系统提供默认的序列值</p> <p>特点：
1、标识列必须和主键搭配吗？不一定，但要求是一个key
2、一个表可以有几个标识列？至多一个！
3、标识列的类型只能是数值型
4、标识列可以通过 SET auto_increment_increment=3;设置步长
可以通过 手动插入值，设置起始值</p> <h2 id="_9-事务"><a href="#_9-事务" class="header-anchor">#</a> 9 事务</h2> <h3 id="_9-1-定义"><a href="#_9-1-定义" class="header-anchor">#</a> 9.1  定义</h3> <p>事务由单独单元的一个或多个SQL语句组成，这个执行单元要么全部执行，要么全部不执行。</p> <p>MySQL引擎：</p> <p>1、概念：在mysql中的数据用各种不同的技术存储在文件（或内存）中。
2、通过show engines；来查看mysql支持的存储引擎。
3、 在mysql中用的最多的存储引擎有： innodb，myisam ,memory 等。其中innodb支持事务，而myisam、 memory等不支持事务</p> <p>案例：转账</p> <p>张三丰  1000
郭襄	1000</p> <p>update 表 set 张三丰的余额=500 where name='张三丰'
意外
update 表 set 郭襄的余额=1500 where name='郭襄'</p> <p><strong>示例</strong></p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> account <span class="token punctuation">(</span>
		id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
		NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		balance <span class="token keyword">DOUBLE</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">-- 添加数据</span>
	<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> account <span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> balance<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
		<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
		<span class="token comment">-- 张三给李四转账 500 元</span>
		
		<span class="token comment">-- 0. 开启事务</span>
		<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
		<span class="token comment">-- 1. 张三账户 -500</span>
		
		<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">500</span> <span class="token keyword">WHERE</span> NAME <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">;</span>
		<span class="token comment">-- 2. 李四账户 +500</span>
		<span class="token comment">-- 出错了...</span>
		<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">500</span> <span class="token keyword">WHERE</span> NAME <span class="token operator">=</span> <span class="token string">'lisi'</span><span class="token punctuation">;</span>
		
		<span class="token comment">-- 发现执行没有问题，提交事务</span>
		<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
		
		<span class="token comment">-- 发现出问题了，回滚事务</span>
		<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_9-2-特性"><a href="#_9-2-特性" class="header-anchor">#</a> 9.2  特性</h3> <ol><li>原子性（Atomicity）
原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</li> <li>一致性（Consistency）
事务必须使数据库从一个一致性状态变换到另外一个一致性状态。</li> <li>隔离性（Isolation）
事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</li> <li>持久性（Durability）
持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</li></ol> <h3 id="_9-3-开启事务"><a href="#_9-3-开启事务" class="header-anchor">#</a> 9.3 开启事务</h3> <p><strong>事务的创建</strong>
隐式事务：事务没有明显的开启和结束的标记
比如insert、update、delete语句</p> <p>delete from 表 where id =1;</p> <p>显式事务：事务具有明显的开启和结束的标记
前提：必须先设置自动提交功能为禁用</p> <p>set autocommit=0;</p> <p>步骤1：开启事务
set autocommit=0;
start transaction;可选的
步骤2：编写事务中的sql语句(select insert update delete)
语句1;
语句2;
...</p> <p>步骤3：结束事务
commit;提交事务
rollback;回滚事务</p> <h3 id="_9-4-事务的隔离"><a href="#_9-4-事务的隔离" class="header-anchor">#</a> 9.4 事务的隔离</h3> <p>对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题:</p> <ul><li>脏读: 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还没有被提交的字段.
之后, 若 T2 回滚, T1读取的内容就是临时且无效的.</li> <li>不可重复读: 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 更新了该字段.
之后, T1再次读取同一个字段, 值就不同了.</li> <li>幻读: 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中插
入了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行.</li></ul> <p>数据库事务的隔离性:</p> <p>数据库系统必须具有隔离并发运行各个事务的能力,使它们不会相互影响, 避免各种并发问题.
一个事务与其他事务隔离的程度称为隔离级别. 数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱.</p> <p><strong>事务的隔离级别</strong></p> <div class="language- extra-class"><pre class="language-text"><code>		               脏读		不可重复读	幻读
read uncommitted：       √		     √		√
read committed：         ×		     √		√
repeatable read：        ×		     ×		√
serializable	         ×            ×      ×

</code></pre></div><p>mysql中默认 第三个隔离级别 repeatable read
oracle中默认第二个隔离级别 read committed
查看隔离级别
select @@tx_isolation;
设置隔离级别
set session|global transaction isolation level 隔离级别;</p> <div class="language- extra-class"><pre class="language-text"><code>演示：
set global transaction isolation level read uncommitted;
start transaction;
-- 转账操作
update account set balance = balance - 500 where id = 1;
update account set balance = balance + 500 where id = 2;
</code></pre></div><h2 id="_10-视图"><a href="#_10-视图" class="header-anchor">#</a> 10 视图</h2> <h3 id="_10-1-定义"><a href="#_10-1-定义" class="header-anchor">#</a> 10.1 定义</h3> <p>MySQL从5.0.1版本开始提供视图功能。一种虚拟存在的表，行和列的数据来自定义视图的查询中使用的表
，并且是在使用视图时动态生成的， 只保存了sql逻辑，不保存查询结果</p> <p>应用场景：
– 多个地方用到同样的查询结果
– 该查询结果使用的sql语句较复杂
• 示例：</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> my_v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> studentname<span class="token punctuation">,</span>majorname
<span class="token keyword">FROM</span> student s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> major m
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>majorid<span class="token operator">=</span>m<span class="token punctuation">.</span>majorid
<span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>majorid<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="_10-2-视图操作"><a href="#_10-2-视图操作" class="header-anchor">#</a> 10.2 视图操作</h3> <ol><li>创建视图的语法：
create [or replace] view view_name
As select_statement
[with|cascaded|local|check option]</li> <li>修改视图的语法：
alter view view_name
As select_statement
[with|cascaded|local|check option]</li></ol> <div class="language- extra-class"><pre class="language-text"><code>视图的可更新性和视图中查询的定义有关系，以下类型的
视图是不能更新的。
• 包含以下关键字的sql语句：分组函数、 distinct、 group by
、 having、 union或者union all
• 常量视图
• Select中包含子查询
• join
• from一个不能更新的视图
• where子句的子查询引用了from子句中的表
</code></pre></div><ol start="3"><li>删除视图的语法：
用户可以一次删除一个或者多个视图，前提是必须有该视
图的drop权限。
drop view [if exists] view_name,view_name …[restrict|cascade]</li> <li>查看视图的语法：
show tables;
如果需要查询某个视图的定义，可以使用show create view
命令进行查看：
show create view view_name \G</li></ol> <h3 id="_10-3-好处"><a href="#_10-3-好处" class="header-anchor">#</a> 10.3 好处</h3> <ul><li>重用sql语句</li> <li>简化复杂的sql操作，不必知道它的查询细节</li> <li>保护数据，提高安全性</li></ul> <h3 id="_10-4-视图和表"><a href="#_10-4-视图和表" class="header-anchor">#</a> 10.4 视图和表</h3> <div class="language- extra-class"><pre class="language-text"><code>含义：虚拟表，和普通表一样使用
mysql5.1版本出现的新特性，是通过表动态生成的数据

视图	create view		只是保存了sql逻辑	增删改查，只是一般不能增删改

表	create table		保存了数据		增删改查

</code></pre></div><h2 id="_11-变量"><a href="#_11-变量" class="header-anchor">#</a> 11 变量</h2> <p>###11.1 变量分类</p> <p>系统变量：
全局变量
会话变量</p> <p>自定义变量：
用户变量
局部变量</p> <p><strong>系统变量</strong>
说明：变量由系统定义，不是用户定义，属于服务器层面
注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别
使用步骤：
1、查看所有系统变量
show global|【session】variables;
2、查看满足条件的部分系统变量
show global|【session】 variables like '%char%';
3、查看指定的系统变量的值
select @@global|【session】系统变量名;
4、为某个系统变量赋值
方式一：
set global|【session】系统变量名=值;
方式二：
set @@global|【session】系统变量名=值;</p> <p>###11.2 全局变量</p> <p>作用域：针对于所有会话（连接）有效，但不能跨重启
想要重启的配置依旧生效，需要修改配置文件</p> <p>①查看所有全局变量</p> <p>SHOW GLOBAL VARIABLES;</p> <p>②查看满足条件的部分系统变量</p> <p>SHOW GLOBAL VARIABLES LIKE '%char%';</p> <p>③查看指定的系统变量的值</p> <p>SELECT @@global.autocommit;</p> <p>④为某个系统变量赋值</p> <p>SET @@global.autocommit=0;
SET GLOBAL autocommit=0;</p> <p>###11.3 会话变量</p> <p>作用域：针对于当前会话（连接）有效</p> <p>①查看所有会话变量</p> <p>SHOW SESSION VARIABLES;</p> <p>②查看满足条件的部分会话变量</p> <p>SHOW SESSION VARIABLES LIKE '%char%';</p> <p>③查看指定的会话变量的值</p> <p>SELECT @@autocommit;
SELECT @@session.tx_isolation;</p> <p>④为某个会话变量赋值</p> <p>SET @@session.tx_isolation='read-uncommitted';
SET SESSION tx_isolation='read-committed';</p> <p>###11.4 自定义变量
说明：变量由用户自定义，而不是系统提供的
使用步骤：
1、声明
2、赋值
3、使用（查看、比较、运算等）</p> <p>1》用户变量</p> <p>/*
作用域：针对于当前会话（连接）有效，作用域同于会话变量
*/</p> <p>赋值操作符：=或:=</p> <p>①声明并初始化</p> <p>SET @变量名=值;
SET @变量名:=值;
SELECT @变量名:=值;</p> <p>②赋值（更新变量的值）</p> <p>方式一：</p> <div class="language- extra-class"><pre><code>SET @变量名=值;
SET @变量名:=值;
SELECT @变量名:=值;
</code></pre></div><p>方式二：</p> <div class="language- extra-class"><pre><code>SELECT 字段 INTO @变量名
FROM 表;
</code></pre></div><p>③使用（查看变量的值）</p> <p>SELECT @变量名;</p> <p>2》局部变量</p> <p>/*
作用域：仅仅在定义它的begin end块中有效
应用在 begin end中的第一句话
*/</p> <p>①声明</p> <p>DECLARE 变量名 类型;
DECLARE 变量名 类型 【DEFAULT 值】;</p> <p>②赋值（更新变量的值）</p> <p>方式一：</p> <div class="language- extra-class"><pre><code>SET 局部变量名=值;
SET 局部变量名:=值;
SELECT 局部变量名:=值;
</code></pre></div><p>方式二：</p> <div class="language- extra-class"><pre><code>SELECT 字段 INTO 具备变量名
FROM 表;
</code></pre></div><p>③使用（查看变量的值）</p> <p>SELECT 局部变量名;</p> <p>案例：声明两个变量，求和并打印</p> <p>用户变量</p> <p>SET @m=1;
SET @n=1;
SET @sum=@m+@n;
SELECT @sum;</p> <p>局部变量</p> <p>DECLARE m INT DEFAULT 1;
DECLARE n INT DEFAULT 1;
DECLARE SUM INT;
SET SUM=m+n;
SELECT SUM;</p> <p>用户变量和局部变量的对比</p> <div class="language- extra-class"><pre><code>	作用域			定义位置		语法
</code></pre></div><p>用户变量	当前会话		会话的任何地方		加@符号，不用指定类型
局部变量	定义它的BEGIN END中 	BEGIN END的第一句话	一般不用加@,需要指定类型</p> <h2 id="_12-存储过程"><a href="#_12-存储过程" class="header-anchor">#</a> 12 存储过程</h2> <h3 id="_12-1-定义"><a href="#_12-1-定义" class="header-anchor">#</a> 12.1 定义</h3> <p>含义：一组经过预先编译的sql语句的集合
好处：</p> <div class="language- extra-class"><pre class="language-text"><code>1、提高了sql语句的重用性，减少了开发程序员的压力
2、提高了效率
3、减少了传输次数
</code></pre></div><p>分类：</p> <div class="language- extra-class"><pre class="language-text"><code>1、无返回无参
2、仅仅带in类型，无返回有参
3、仅仅带out类型，有返回无参
4、既带in又带out，有返回有参
5、带inout，有返回有参
注意：in、out、inout都可以在一个存储过程中带多个
</code></pre></div><h3 id="_12-2-创建存储过程"><a href="#_12-2-创建存储过程" class="header-anchor">#</a> 12.2 创建存储过程</h3> <p>语法：</p> <div class="language- extra-class"><pre class="language-text"><code>create procedure 存储过程名(in|out|inout 参数名  参数类型,...)
begin
	存储过程体

end
</code></pre></div><p>类似于方法：</p> <div class="language- extra-class"><pre class="language-text"><code>修饰符 返回类型 方法名(参数类型 参数名,...){

	方法体;
}
</code></pre></div><p>注意</p> <div class="language- extra-class"><pre class="language-text"><code>1、需要设置新的结束标记
delimiter 新的结束标记
示例：
delimiter $

CREATE PROCEDURE 存储过程名(IN|OUT|INOUT 参数名  参数类型,...)
BEGIN
	sql语句1;
	sql语句2;

END $

2、存储过程体中可以有多条sql语句，如果仅仅一条sql语句，则可以省略begin end

3、参数前面的符号的意思
in:该参数只能作为输入 （该参数不能做返回值）
out：该参数只能作为输出（该参数只能做返回值）
inout：既能做输入又能做输出
</code></pre></div><p>调用存储过程</p> <div class="language- extra-class"><pre class="language-text"><code>call 存储过程名(实参列表)
</code></pre></div><h2 id="_13-函数"><a href="#_13-函数" class="header-anchor">#</a> 13 函数</h2> <h3 id="_13-1-创建函数"><a href="#_13-1-创建函数" class="header-anchor">#</a> 13.1 创建函数</h3> <p>学过的函数：LENGTH、SUBSTR、CONCAT等
语法：</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE FUNCTION 函数名(参数名 参数类型,...) RETURNS 返回类型
BEGIN
	函数体

END
</code></pre></div><h3 id="_13-2-调用函数"><a href="#_13-2-调用函数" class="header-anchor">#</a> 13.2 调用函数</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT 函数名（实参列表
</code></pre></div><h3 id="函数和存储过程的区别"><a href="#函数和存储过程的区别" class="header-anchor">#</a> 函数和存储过程的区别</h3> <div class="language- extra-class"><pre class="language-text"><code>		关键字		调用语法	返回值			应用场景
函数		FUNCTION	SELECT 函数()	只能是一个		一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个
存储过程	PROCEDURE	CALL 存储过程()	可以有0个或多个		一般用于更新
</code></pre></div><h2 id="_14-流程控制结构"><a href="#_14-流程控制结构" class="header-anchor">#</a> 14 流程控制结构</h2> <h2 id="_15-数据库设计"><a href="#_15-数据库设计" class="header-anchor">#</a> 15 数据库设计</h2> <h3 id="_15-1-表的关系"><a href="#_15-1-表的关系" class="header-anchor">#</a> 15.1 表的关系</h3> <ol><li><p>多表之间的关系</p> <ol><li><p>分类：</p> <ol><li>一对一(了解)：
<ul><li>如：人和身份证</li> <li>分析：一个人只有一个身份证，一个身份证只能对应一个人</li></ul></li> <li>一对多(多对一)：
<ul><li>如：部门和员工</li> <li>分析：一个部门有多个员工，一个员工只能对应一个部门</li></ul></li> <li>多对多：
<ul><li>如：学生和课程</li> <li>分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择</li></ul></li></ol></li> <li><p>实现关系：</p> <ol><li>一对多(多对一)：
<ul><li>如：部门和员工</li> <li>实现方式：在多的一方建立外键，指向一的一方的主键。</li></ul></li> <li>多对多：
<ul><li>如：学生和课程</li> <li>实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键</li></ul></li> <li>一对一(了解)：
<ul><li>如：人和身份证</li> <li>实现方式：一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</li></ul></li></ol></li> <li><p>案例
-- 创建旅游线路分类表 tab_category
-- cid 旅游线路分类主键，自动增长
-- cname 旅游线路分类名称非空，唯一，字符串 100
CREATE TABLE tab_category (
cid INT PRIMARY KEY AUTO_INCREMENT,
cname VARCHAR(100) NOT NULL UNIQUE
);</p> <p>-- 创建旅游线路表 tab_route
/*
rid 旅游线路主键，自动增长
rname 旅游线路名称非空，唯一，字符串 100
price 价格
rdate 上架时间，日期类型
cid 外键，所属分类
*/
CREATE TABLE tab_route(
rid INT PRIMARY KEY AUTO_INCREMENT,
rname VARCHAR(100) NOT NULL UNIQUE,
price DOUBLE,
rdate DATE,
cid INT,
FOREIGN KEY (cid) REFERENCES tab_category(cid)
);</p> <p>/*创建用户表 tab_user
uid 用户主键，自增长
username 用户名长度 100，唯一，非空
password 密码长度 30，非空
name 真实姓名长度 100
birthday 生日
sex 性别，定长字符串 1
telephone 手机号，字符串 11
email 邮箱，字符串长度 100
*/
CREATE TABLE tab_user (
uid INT PRIMARY KEY AUTO_INCREMENT,
username VARCHAR(100) UNIQUE NOT NULL,
PASSWORD VARCHAR(30) NOT NULL,
NAME VARCHAR(100),
birthday DATE,
sex CHAR(1) DEFAULT '男',
telephone VARCHAR(11),
email VARCHAR(100)
);</p> <p>/*
创建收藏表 tab_favorite
rid 旅游线路 id，外键
date 收藏时间
uid 用户 id，外键
rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次
*/
CREATE TABLE tab_favorite (
rid INT, -- 线路id
DATE DATETIME,
uid INT, -- 用户id
-- 创建复合主键
PRIMARY KEY(rid,uid), -- 联合主键
FOREIGN KEY (rid) REFERENCES tab_route(rid),
FOREIGN KEY(uid) REFERENCES tab_user(uid)
);</p></li></ol></li></ol> <h3 id="_15-2-数据库设计的范式"><a href="#_15-2-数据库设计的范式" class="header-anchor">#</a> 15.2 数据库设计的范式</h3> <ul><li><p>概念：设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求</p> <p>设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。
目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。</p></li> <li><p>分类：</p> <ol><li><p>第一范式（1NF）：每一列都是不可分割的原子数据项</p></li> <li><p>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）</p> <ul><li>几个概念：
<ol><li>函数依赖：A--&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A
例如：学号--&gt;姓名。  （学号，课程名称） --&gt; 分数</li> <li>完全函数依赖：A--&gt;B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。
例如：（学号，课程名称） --&gt; 分数</li> <li>部分函数依赖：A--&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。
例如：（学号，课程名称） -- &gt; 姓名</li> <li>传递函数依赖：A--&gt;B, B -- &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A
例如：学号--&gt;系名，系名--&gt;系主任</li> <li>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码
例如：该表中码为：（学号，课程名称）
<ul><li>主属性：码属性组中的所有属性</li> <li>非主属性：除过码属性组的属性</li></ul></li></ol></li></ul></li> <li><p>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</p></li></ol></li></ul> <p>8 数据库的备份和还原</p> <ol><li>命令行：
<ul><li>语法：
<ul><li>备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</li> <li>还原：
<ol><li>登录数据库</li> <li>创建数据库</li> <li>使用数据库</li> <li>执行文件。source 文件路径</li></ol></li></ul></li></ul></li> <li>图形化工具：</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed392c7e.js" defer></script><script src="/assets/js/2.e61ebc2f.js" defer></script><script src="/assets/js/37.01e1887e.js" defer></script>
  </body>
</html>
